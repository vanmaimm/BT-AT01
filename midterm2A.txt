create database product_management;

use product_management;

create table category(
	id int auto_increment not null primary key,
    cat_name varchar(255),
    note text
);

create table customer(
	id int not null auto_increment primary key,
    cus_name varchar(255),
    address varchar(255),
    email varchar(255)
);

create table orders(
	id int not null auto_increment primary key,
    cus_id int,
    date datetime,
    foreign key (cus_id) references customer(id)
);

create table product(
	id int not null auto_increment primary key,
    pro_name varchar(255),
    category_id int,
    price int,
    quantity int,
    status int,
    imported_date date,
    note text,
    foreign key (category_id) references category(id)
);

create table product_audit(
	id int not null auto_increment primary key,
    prod_id int,
    message text,
    foreign key (prod_id) references product(id)
);

create table prod_orders(
	prod_id int not null,
    order_id int not null,
    quantity int not null,
    primary key (prod_id, order_id),
    foreign key (order_id) references orders(id),
    foreign key (prod_id) references product(id)
);

create table message(
	id int not null auto_increment primary key,
    content text,
    created_date datetime
);

insert into category values(1, "category 1", "note 1");
insert into category values(2, "category 2", "note 2");

insert into product values(1, "product 1", 1, 1000000, 44, 0, "2000-12-23", "note product 1");
insert into product values(2, "product 2", 2, 3000000, 56, 0, "2000-09-24", "note product 2");
insert into product values(3, "product 3", 2, 4000000, 22, 1, "2000-09-25", "note product 3");


insert into customer values(1, "customer 1", "address 1", "customer1@gmail.com");
insert into customer values(2, "customer 2", "address 2", "customer2@gmail.com");
insert into customer values(3, "customer 3", "address 3", "customer3@gmail.com");

insert into orders values(1, 1, "2000-08-22");
insert into orders values(2, 2, "2000-08-22");
insert into orders values(3, 3, "2000-09-14");